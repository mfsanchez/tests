<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Gestion de Organizaciones</title>
<style>
.top-bar {
  position: relative;
  z-index: 2000;
}

#startOverlay {
  z-index: 1000;
}

body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    margin: 0;
    padding: 16px;
    background: #f8fafc;
  }

  .top-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
  }

  .back-btn {
    text-decoration: none;
    font-weight: 600;
    color: #0f172a;
    background: #e2e8f0;
    padding: 8px 12px;
    border-radius: 10px;
  }

  .back-btn:hover {
    background: #cbd5f5;
  }

  .logo-umh {
    height: 48px;
    max-width: 60%;
    object-fit: contain;
  }

  @media (max-width: 480px) {
    .logo-umh {
      height: 40px;
    }
  }
:root{
  --bg:#ffffff;
  --card:#ffffff;
  --border:#e5e7eb;
  --text:#111827;
  --muted:#6b7280;
  --ok:#16a34a;
  --bad:#dc2626;
  --accent:#2563eb;
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
  padding:16px;
}
.wrap{
  max-width:900px;
  margin:0 auto;
}
h1{
  font-size:22px;
  margin-bottom:4px;
}
.meta{
  font-size:13px;
  color:var(--muted);
  margin-bottom:16px;
}
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:16px;
  box-shadow:0 8px 20px rgba(15,23,42,.08);
  position:relative;
  overflow:hidden;
}
.stats{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  font-size:13px;
  margin-bottom:12px;
}
.stat{
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.7);
  display:flex;
  align-items:center;
  gap:6px;
  background:#f9fafb;
}
.stat span.label{color:var(--muted);font-weight:500}
.stat span.value{font-variant-numeric:tabular-nums}
.stat.ok{border-color:rgba(34,197,94,.6);background:#ecfdf3;}
.stat.bad{border-color:rgba(239,68,68,.6);background:#fef2f2;}
.stat.pen{border-color:rgba(250,204,21,.7);background:#fffbeb;}
#questionBox{margin-top:4px;}
#qNumber{
  font-size:14px;
  color:var(--accent);
  font-weight:600;
  margin-bottom:6px;
}
#qText{
  font-size:18px;
  font-weight:700;
  margin-bottom:12px;
}
.options{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.btn-option{
  text-align:left;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.7);
  padding:9px 12px;
  font-size:14px;
  background:#f9fafb;
  cursor:pointer;
  display:flex;
  gap:8px;
  align-items:center;
  transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease, background .12s ease;
}
.btn-option span.key{
  font-weight:700;
  font-size:12px;
  padding:2px 7px;
  border-radius:999px;
  background:#eef2ff;
  border:1px solid rgba(129,140,248,.8);
  color:#111827;
}
.btn-option span.label{flex:1}
.btn-option:hover{
  transform:translateY(-1px);
  box-shadow:0 8px 18px rgba(15,23,42,.08);
  border-color:var(--accent);
  background:#eff6ff;
}
.btn-option.correct{
  border-color:var(--ok);
  background:#ecfdf3;
}
.btn-option.wrong{
  border-color:var(--bad);
  background:#fef2f2;
}
.btn-option.disabled{
  opacity:.9;
  cursor:default;
}
.footer{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:12px;
  gap:8px;
  flex-wrap:nowrap;
}
.nav-buttons{
  display:flex;
  gap:8px;
}
button.nav{
  border-radius:999px;
  border:1px solid rgba(148,163,184,.9);
  background:#ffffff;
  color:#111827;
  padding:7px 14px;
  font-size:13px;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:6px;
  transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease, background .12s ease;
}
button.nav:hover{
  transform:translateY(-1px);
  box-shadow:0 8px 18px rgba(15,23,42,.12);
  border-color:var(--accent);
  background:#eff6ff;
}
button.nav:disabled{
  opacity:.4;
  cursor:default;
  box-shadow:none;
  transform:none;
}
#feedback{
  font-size:13px;
  min-height:18px;
  flex:1;
}
#feedback.ok{color:var(--ok);}
#feedback.bad{color:var(--bad);}
#feedback.neutral{color:var(--muted);}

/* Animaciones base */
.flash-correct{
  animation:flashGreen .45s ease-out;
}
.flash-wrong{
  animation:flashRed .45s ease-out;
}
.shake{
  animation:shake .3s ease-in-out;
}
@keyframes flashGreen{
  0%{box-shadow:0 0 0 0 rgba(22,163,74,.0);}
  40%{box-shadow:0 0 0 12px rgba(22,163,74,.18);}
  100%{box-shadow:0 0 0 0 rgba(22,163,74,.0);}
}
@keyframes flashRed{
  0%{box-shadow:0 0 0 0 rgba(220,38,38,.0);}
  40%{box-shadow:0 0 0 12px rgba(220,38,38,.18);}
  100%{box-shadow:0 0 0 0 rgba(220,38,38,.0);}
}
@keyframes shake{
  0%,100%{transform:translateX(0);}
  20%{transform:translateX(-4px);}
  40%{transform:translateX(4px);}
  60%{transform:translateX(-3px);}
  80%{transform:translateX(3px);}
}

/* Animaci√≥n divertida al fallar: vi√±eta tipo c√≥mic */
.explosion{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%) scale(.2);
  pointer-events:none;
  animation:boomPop .75s ease-out forwards;
}
.explosion-core{
  width:180px;
  height:180px;
  border-radius:50%;
  background:
    radial-gradient(circle at 30% 30%,#fef9c3 0,#fde047 30%,transparent 75%),
    radial-gradient(circle at 70% 40%,#fee2e2 0,#fecaca 35%,transparent 80%),
    radial-gradient(circle at 50% 65%,#b91c1c 0,#7f1d1d 45%,transparent 80%);
  border:4px solid #111827;
  box-shadow:0 0 25px rgba(248,113,113,.8);
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
}
.explosion-core::before{
  /* picos tipo c√≥mic */
  content:"";
  position:absolute;
  inset:-18px;
  background:#f97316;
  clip-path:polygon(50% 0%,63% 13%,83% 9%,79% 27%,94% 35%,80% 47%,90% 63%,71% 65%,74% 83%,57% 76%,50% 95%,43% 76%,26% 83%,29% 65%,10% 63%,20% 47%,6% 35%,21% 27%,17% 9%,37% 13%);
  z-index:-1;
}
.explosion-label{
  font-size:26px;
  font-weight:900;
  color:#111827;
  text-shadow:2px 2px 0 #facc15, -2px -2px 0 #facc15;
}

/* trocitos que saltan */
.explosion-piece{
  position:absolute;
  width:10px;
  height:22px;
  border-radius:3px;
  background:#ef4444;
  box-shadow:0 0 6px rgba(127,29,29,.8);
  transform-origin:center bottom;
  animation:pieceFly .75s ease-out forwards;
}

@keyframes boomPop{
  0%{
    transform:translate(-50%,-50%) scale(.2) rotate(-8deg);
    opacity:0;
  }
  40%{
    transform:translate(-50%,-50%) scale(1.05) rotate(3deg);
    opacity:1;
  }
  70%{
    transform:translate(-50%,-50%) scale(0.95) rotate(-2deg);
    opacity:.95;
  }
  100%{
    transform:translate(-50%,-50%) scale(0.8) rotate(0deg);
    opacity:0;
  }
}

@keyframes pieceFly{
  0%{
    transform:translate(0,0) scale(1);
    opacity:1;
  }
  100%{
    transform:translate(var(--dx),var(--dy)) scale(.3);
    opacity:0;
  }
}

/* Confeti / gorros al acertar */
.confetti-container{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}
.confetti-emoji{
  position:absolute;
  top:-12%;
  font-size:20px;
  animation:fallConfetti 2.2s ease-out forwards;
}
@keyframes fallConfetti{
  0%{
    transform:translateY(0) rotate(0deg);
    opacity:1;
  }
  100%{
    transform:translateY(260%) rotate(360deg);
    opacity:0;
  }
}

/* Overlay inicio */
#startOverlay{
  position:fixed;
  inset:0;
  background:rgba(15,23,42,.35);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:20;
}
.start-box{
  max-width:420px;
  background:#ffffff;
  border-radius:18px;
  padding:20px;
  border:1px solid rgba(148,163,184,.8);
  box-shadow:0 18px 40px rgba(15,23,42,.25);
}
.start-text{
  font-size:14px;
  color:#6b7280;
  margin-bottom:14px;
}
.start-warning{
  font-size:14px;
  color:#b45309;
  font-weight:600;
  margin-bottom:8px;
}
button#startBtn{
  width:100%;
  border-radius:999px;
  border:none;
  padding:9px 14px;
  font-size:14px;
  font-weight:600;
  cursor:pointer;
  background:linear-gradient(135deg,#38bdf8,#22c55e);
  color:#020617;
  box-shadow:0 12px 25px rgba(8,47,73,.35);
  transition:transform .12s ease, box-shadow .12s ease;
}
button#startBtn:hover{
  transform:translateY(-1px);
  box-shadow:0 18px 35px rgba(8,47,73,.5);
}

/* Resultado final */
#finalBox{
  margin-top:12px;
  padding-top:10px;
  border-top:1px dashed rgba(148,163,184,.8);
  font-size:13px;
  color:#6b7280;
}
#finalBox strong{color:var(--accent);}
</style>
</head>
<body>
<header class="top-bar">
  <a href="../" class="back-btn">‚¨Ö Volver al men√∫</a>
  <img src="../assets/umh.png" alt="Universitas Miguel Hern√°ndez" class="logo-umh">
</header>
<div id="startOverlay">
  <div class="start-box">
    <div class="start-warning">‚ö†Ô∏è ATENCI√ìN:GESTION DE ORGANIZACIONES 100% PREGUNTAS</div>
    <div class="start-text">
      √ösalo para practicar, pero contrasta siempre con temario, normativa y criterio del profesorado.
    </div>
    <button id="startBtn">Empezar el test</button>
  </div>
</div>

<div class="wrap">
  <h1>GESTION DE ORGANIZACIONES</h1>
  <div class="meta">
    Test interactivo ¬∑ Aciertos/Fallos ¬∑ Penalizaci√≥n: cada 3 fallos se resta 1 acierto ¬∑ Preguntas barajadas.
  </div>

  <div class="card" id="card">
    <div class="stats">
      <div class="stat ok"><span class="label">Aciertos</span><span class="value" id="statCorrect">0</span></div>
      <div class="stat bad"><span class="label">Fallos</span><span class="value" id="statWrong">0</span></div>
      <div class="stat pen"><span class="label">Penalizaciones</span><span class="value" id="statPenalty">0</span></div>
      <div class="stat"><span class="label">Pregunta</span><span class="value" id="statIndex">1 / 50</span></div>
    </div>

    <div id="questionBox">
      <div id="qNumber">Pregunta 1</div>
      <div id="qText"></div>
      <div class="options" id="optionsBox"></div>
    </div>

    <div class="footer">
      <div id="feedback" class="neutral"></div>
      <div class="nav-buttons">
        <button class="nav" id="prevBtn" disabled>‚üµ Anterior</button>
        <button class="nav" id="nextBtn">Siguiente ‚ü∂</button>
        <button class="nav" id="retryWrongBtn">Repetir errores</button>
        <button class="nav" id="shuffleBtn">Barajar preguntas</button>
      </div>
    </div>

    <div id="finalBox"></div>
  </div>
</div>

<script>

const RAW = [
{
  q: "¬øQui√©n afirm√≥ que todo lo que nos rodea son organizaciones (bestias colectivas)?",
  options: ["Barnard", "Gibson", "Mintzberg"],
  correct: 2
},
{
  q: "¬øCu√°les son caracter√≠sticas b√°sicas de las organizaciones?",
  options: [
    "Grupo social estructurado de personas",
    "Orientadas a un fin com√∫n",
    "Ambas son correctas"
  ],
  correct: 2
},
{
  q: "¬øQui√©n defini√≥ la organizaci√≥n como una unidad coordinada formada por un m√≠nimo de dos personas que trabajan para alcanzar objetivos comunes?",
  options: ["Barnard", "Gibson y otros", "S√°nchez y Gonz√°lez"],
  correct: 1
},
{
  q: "¬øQui√©n defini√≥ la organizaci√≥n como un sistema de actividades conscientemente coordinadas de dos o m√°s personas?",
  options: ["Barnard", "Gibson y otros", "S√°nchez y Gonz√°lez"],
  correct: 0
},
{
  q: "Seg√∫n S√°nchez y Gonz√°lez, ¬øqu√© definiciones de empresa son correctas?",
  options: [
    "Empresa orientada a obtener beneficios mediante la comercializaci√≥n de productos o servicios",
    "Empresa como organizaci√≥n con finalidad econ√≥mica y social",
    "Ambas son correctas"
  ],
  correct: 2
},
{
  q: "¬øDe qu√© depende el funcionamiento, √©xito y fracaso de la empresa?",
  options: [
    "De los objetivos",
    "De las decisiones, recursos y funciones",
    "Ambas son correctas"
  ],
  correct: 2
},
{
  q: "¬øCu√°les son las dimensiones de la empresa?",
  options: [
    "Funcional y t√©cnico-econ√≥mica",
    "Econ√≥mico-financiera, jur√≠dico-mercantil y social",
    "Funcional, t√©cnico-econ√≥mica, econ√≥mico-financiera, jur√≠dico-mercantil y social"
  ],
  correct: 2
},
{
  q: "¬øQu√© definici√≥n de empresa aglutina todas sus dimensiones?",
  options: [
    "Organizaci√≥n orientada a minimizar costes",
    "Organizaci√≥n econ√≥mica con estructura jur√≠dica y organizativa que distribuye poder y responsabilidad",
    "Empresa sin estructura organizativa"
  ],
  correct: 1
},
{
  q: "¬øA qui√©n corresponde la propiedad de la empresa?",
  options: [
    "A las personas que ostentan la titularidad, una o varias",
    "A los directivos de la empresa",
    "A los trabajadores"
  ],
  correct: 0
},
{
  q: "¬øQui√©n ejerce la direcci√≥n de la empresa?",
  options: [
    "Quienes fijan objetivos",
    "Quienes fijan objetivos y toman decisiones",
    "Quienes fijan objetivos, toman decisiones y dirigen el trabajo de otros"
  ],
  correct: 2
},
{
  q: "¬øPara qu√© es necesario el gobierno de la empresa?",
  options: [
    "Para asegurar el alineamiento entre directivos y propietarios",
    "Para fijar objetivos operativos",
    "Para ejecutar tareas diarias"
  ],
  correct: 0
},
{
  q: "¬øQu√© es el Consejo de Administraci√≥n?",
  options: [
    "Grupo peque√±o que dirige y supervisa a los directivos",
    "Grupo grande que dirige a los trabajadores",
    "√ìrgano operativo de la empresa"
  ],
  correct: 0
},
{
  q: "Seg√∫n Smith y Marx, el capitalista es:",
  options: [
    "Organizador del proceso productivo",
    "Propietario de los medios de producci√≥n y apropiador del beneficio",
    "Asumidor del riesgo econ√≥mico"
  ],
  correct: 1
},
{
  q: "¬øCu√°l es la definici√≥n correcta de organizaci√≥n?",
  options: [
    "Grupo social estructurado orientado a un fin com√∫n",
    "Sistema jer√°rquico que requiere coordinaci√≥n e interact√∫a con el entorno",
    "Ambas son correctas"
  ],
  correct: 2
},
{
  q: "¬øCu√°l es la definici√≥n correcta de administraci√≥n?",
  options: [
    "Control consciente de objetivos, tareas y responsables",
    "Control consciente de recursos y comprobaci√≥n de objetivos",
    "Ambas son correctas"
  ],
  correct: 2
},
{
  q: "¬øQui√©nes llevan a cabo las actividades de la administraci√≥n?",
  options: ["Empresarios", "Directivos o gerentes", "Trabajadores"],
  correct: 1
},
{
  q: "¬øC√≥mo se representa gr√°ficamente la estructura de una organizaci√≥n?",
  options: [
    "Mediante un flujograma",
    "Mediante un organigrama",
    "Mediante un cuadro de mando"
  ],
  correct: 1
},
{
  q: "¬øQu√© muestra un organigrama?",
  options: [
    "Los procesos productivos",
    "Las relaciones jer√°rquicas, funciones y responsabilidades",
    "Los resultados econ√≥micos"
  ],
  correct: 1
},
{
  q: "¬øQu√© niveles jer√°rquicos suelen existir en una organizaci√≥n?",
  options: [
    "Nivel estrat√©gico, t√°ctico y operativo",
    "Nivel t√©cnico, financiero y social",
    "Nivel pol√≠tico, econ√≥mico y jur√≠dico"
  ],
  correct: 0
},
{
  q: "¬øC√≥mo se denomina el nivel superior de la organizaci√≥n?",
  options: [
    "Direcci√≥n operativa",
    "Alta direcci√≥n",
    "Direcci√≥n intermedia"
  ],
  correct: 1
},
{
  q: "¬øCu√°l es la principal funci√≥n de la alta direcci√≥n?",
  options: [
    "Ejecutar tareas operativas",
    "Definir objetivos estrat√©gicos y pol√≠ticas generales",
    "Supervisar tareas concretas"
  ],
  correct: 1
},
{
  q: "¬øQui√©nes forman parte habitualmente de la alta direcci√≥n?",
  options: [
    "Mandos intermedios",
    "Consejo de administraci√≥n y alta gerencia",
    "Trabajadores cualificados"
  ],
  correct: 1
},
{
  q: "¬øQu√© nivel de direcci√≥n se encarga de coordinar y transmitir las decisiones estrat√©gicas?",
  options: [
    "Direcci√≥n operativa",
    "Direcci√≥n intermedia",
    "Alta direcci√≥n"
  ],
  correct: 1
},
{
  q: "¬øCu√°l es la funci√≥n principal de la direcci√≥n intermedia?",
  options: [
    "Dise√±ar la estrategia global",
    "Coordinar departamentos y equipos",
    "Ejecutar tareas manuales"
  ],
  correct: 1
},
{
  q: "¬øQui√©nes suelen formar parte de la direcci√≥n intermedia?",
  options: [
    "Directores de √°rea, jefes de departamento",
    "Consejo de administraci√≥n",
    "Personal administrativo"
  ],
  correct: 0
},
{
  q: "¬øQu√© nivel se encarga de la ejecuci√≥n directa de las tareas?",
  options: [
    "Alta direcci√≥n",
    "Direcci√≥n intermedia",
    "Direcci√≥n operativa"
  ],
  correct: 2
},
{
  q: "La direcci√≥n operativa se caracteriza por:",
  options: [
    "Fijar objetivos estrat√©gicos",
    "Aplicar instrucciones y realizar tareas concretas",
    "Definir la misi√≥n de la empresa"
  ],
  correct: 1
},
{
  q: "¬øQui√©nes forman parte del nivel operativo?",
  options: [
    "Consejeros",
    "Mandos intermedios",
    "Supervisores y trabajadores"
  ],
  correct: 2
},
{
  q: "¬øQu√© relaci√≥n existe entre los niveles de direcci√≥n?",
  options: [
    "Son independientes entre s√≠",
    "Existe una relaci√≥n jer√°rquica y de coordinaci√≥n",
    "No existe comunicaci√≥n entre ellos"
  ],
  correct: 1
},
{
  q: "¬øQu√© principio organizativo implica que cada empleado reciba √≥rdenes de un solo superior?",
  options: [
    "Principio de especializaci√≥n",
    "Principio de unidad de mando",
    "Principio de descentralizaci√≥n"
  ],
  correct: 1
},
{
  q: "¬øQu√© ventaja aporta una clara delimitaci√≥n de niveles jer√°rquicos?",
  options: [
    "Incrementa la confusi√≥n organizativa",
    "Facilita la coordinaci√≥n y el control",
    "Reduce la responsabilidad"
  ],
  correct: 1
},
{
  q: "¬øQu√© problema puede generar una excesiva jerarquizaci√≥n?",
  options: [
    "Agilidad en la toma de decisiones",
    "Rigidez organizativa y lentitud",
    "Mayor motivaci√≥n del personal"
  ],
  correct: 1
},
{
  q: "¬øCu√°les son las funciones b√°sicas de la direcci√≥n?",
  options: [
    "Planificar, organizar, dirigir y controlar",
    "Planificar, ejecutar y evaluar",
    "Organizar, motivar y sancionar"
  ],
  correct: 0
},
{
  q: "¬øEn qu√© consiste la funci√≥n de planificaci√≥n?",
  options: [
    "Ejecutar tareas asignadas",
    "Definir objetivos y determinar las acciones para alcanzarlos",
    "Controlar resultados obtenidos"
  ],
  correct: 1
},
{
  q: "¬øQu√© implica la funci√≥n de organizaci√≥n?",
  options: [
    "Asignar tareas, recursos y responsabilidades",
    "Evaluar resultados",
    "Definir la misi√≥n de la empresa"
  ],
  correct: 0
},
{
  q: "¬øCu√°l es el objetivo principal de la funci√≥n de direcci√≥n?",
  options: [
    "Motivar, liderar y guiar a las personas hacia los objetivos",
    "Dise√±ar la estructura formal",
    "Analizar el entorno externo"
  ],
  correct: 0
},
{
  q: "¬øEn qu√© consiste la funci√≥n de control?",
  options: [
    "Supervisar y corregir desviaciones respecto a los objetivos",
    "Asignar recursos humanos",
    "Establecer la cultura organizativa"
  ],
  correct: 0
},
{
  q: "¬øQu√© autor identific√≥ y sistematiz√≥ las funciones de la direcci√≥n?",
  options: [
    "Frederick Taylor",
    "Henri Fayol",
    "Max Weber"
  ],
  correct: 1
},
{
  q: "¬øCu√°ntas funciones b√°sicas de la empresa distingui√≥ Henri Fayol?",
  options: [
    "Tres",
    "Cinco",
    "Seis"
  ],
  correct: 2
},
{
  q: "Seg√∫n Fayol, ¬øcu√°les son las funciones de la empresa?",
  options: [
    "T√©cnicas, comerciales, financieras, de seguridad, contables y administrativas",
    "Productivas, econ√≥micas y sociales",
    "Operativas, t√°cticas y estrat√©gicas"
  ],
  correct: 0
},
{
  q: "¬øQu√© funci√≥n consideraba Fayol como la m√°s importante?",
  options: [
    "Funci√≥n t√©cnica",
    "Funci√≥n administrativa",
    "Funci√≥n financiera"
  ],
  correct: 1
},
{
  q: "¬øCu√°les son los elementos de la funci√≥n administrativa seg√∫n Fayol?",
  options: [
    "Prever, organizar, mandar, coordinar y controlar",
    "Planificar, ejecutar y evaluar",
    "Dirigir, motivar y sancionar"
  ],
  correct: 0
},
{
  q: "¬øQu√© principio de Fayol establece que debe existir un solo jefe por empleado?",
  options: [
    "Principio de jerarqu√≠a",
    "Principio de unidad de mando",
    "Principio de disciplina"
  ],
  correct: 1
},
{
  q: "¬øQu√© principio de Fayol se refiere al respeto de normas y acuerdos?",
  options: [
    "Disciplina",
    "Autoridad",
    "Centralizaci√≥n"
  ],
  correct: 0
},
{
  q: "¬øQu√© principio de Fayol implica que la autoridad debe ir acompa√±ada de responsabilidad?",
  options: [
    "Jerarqu√≠a",
    "Autoridad y responsabilidad",
    "Orden"
  ],
  correct: 1
},
{
  q: "¬øQu√© principio de Fayol defiende la subordinaci√≥n del inter√©s individual al general?",
  options: [
    "Equidad",
    "Esp√≠ritu de equipo",
    "Inter√©s general"
  ],
  correct: 2
},
{
  q: "¬øQu√© principio de Fayol fomenta la uni√≥n y armon√≠a entre los miembros de la organizaci√≥n?",
  options: [
    "Esp√≠ritu de equipo",
    "Centralizaci√≥n",
    "Iniciativa"
  ],
  correct: 0
},
{
  q: "¬øQu√© funci√≥n directiva se ocupa de armonizar esfuerzos y actividades?",
  options: [
    "Control",
    "Coordinaci√≥n",
    "Planificaci√≥n"
  ],
  correct: 1
},
{
  q: "¬øQu√© se entiende por organizaci√≥n formal?",
  options: [
    "Relaciones espont√°neas entre personas",
    "Estructura planificada y oficialmente establecida",
    "Red de relaciones personales no reguladas"
  ],
  correct: 1
},
{
  q: "¬øQu√© caracteriza a la organizaci√≥n informal?",
  options: [
    "Est√° definida por normas escritas",
    "Surge espont√°neamente de las relaciones personales",
    "Es dise√±ada por la direcci√≥n"
  ],
  correct: 1
},
{
  q: "¬øCu√°l es la principal diferencia entre organizaci√≥n formal e informal?",
  options: [
    "El n√∫mero de trabajadores",
    "El grado de planificaci√≥n y oficialidad",
    "El nivel tecnol√≥gico"
  ],
  correct: 1
},
{
  q: "¬øQu√© ventaja puede aportar la organizaci√≥n informal?",
  options: [
    "Genera conflictos permanentes",
    "Mejora la comunicaci√≥n y cohesi√≥n social",
    "Reduce la motivaci√≥n"
  ],
  correct: 1
},
{
  q: "¬øQu√© riesgo puede suponer la organizaci√≥n informal?",
  options: [
    "Exceso de control",
    "Difusi√≥n de rumores y resistencia al cambio",
    "Mayor rigidez organizativa"
  ],
  correct: 1
},
{
  q: "¬øQu√© es la autoridad en una organizaci√≥n?",
  options: [
    "Capacidad informal de influir",
    "Derecho leg√≠timo a mandar y tomar decisiones",
    "Imposici√≥n basada √∫nicamente en la fuerza"
  ],
  correct: 1
},
{
  q: "¬øQu√© relaci√≥n existe entre autoridad y responsabilidad?",
  options: [
    "No existe relaci√≥n",
    "La autoridad debe ir acompa√±ada de responsabilidad",
    "La responsabilidad sustituye a la autoridad"
  ],
  correct: 1
},
{
  q: "¬øQu√© se entiende por delegaci√≥n de autoridad?",
  options: [
    "Renunciar definitivamente al poder",
    "Transferir autoridad y responsabilidad a un subordinado",
    "Eliminar la jerarqu√≠a"
  ],
  correct: 1
},
{
  q: "¬øQui√©n mantiene la responsabilidad √∫ltima tras delegar?",
  options: [
    "El subordinado",
    "La organizaci√≥n",
    "El superior que delega"
  ],
  correct: 2
},
{
  q: "¬øCu√°l es una ventaja de la delegaci√≥n?",
  options: [
    "Centralizar todas las decisiones",
    "Desarrollar capacidades en los subordinados",
    "Eliminar el control"
  ],
  correct: 1
},
{
  q: "¬øQu√© es la centralizaci√≥n?",
  options: [
    "Distribuci√≥n del poder de decisi√≥n en niveles inferiores",
    "Concentraci√≥n de la toma de decisiones en la alta direcci√≥n",
    "Ausencia de jerarqu√≠a"
  ],
  correct: 1
},
{
  q: "¬øQu√© es la descentralizaci√≥n?",
  options: [
    "Concentrar decisiones en la c√∫spide",
    "Delegar autoridad en niveles inferiores",
    "Eliminar la autoridad"
  ],
  correct: 1
},
{
  q: "¬øQu√© ventaja suele asociarse a la descentralizaci√≥n?",
  options: [
    "Mayor lentitud en la toma de decisiones",
    "Mayor flexibilidad y rapidez",
    "P√©rdida de control total"
  ],
  correct: 1
},
{
  q: "¬øQu√© factor influye en el grado de centralizaci√≥n de una empresa?",
  options: [
    "El tama√±o y la complejidad organizativa",
    "El color corporativo",
    "La antig√ºedad de los empleados"
  ],
  correct: 0
},
{
  q: "¬øQu√© tipo de organizaci√≥n favorece la descentralizaci√≥n?",
  options: [
    "Estructuras r√≠gidas y jer√°rquicas",
    "Organizaciones grandes y din√°micas",
    "Organizaciones sin objetivos"
  ],
  correct: 1
},
{
  q: "¬øQu√© afirmaci√≥n es correcta?",
  options: [
    "La centralizaci√≥n siempre es negativa",
    "La descentralizaci√≥n siempre elimina riesgos",
    "El grado √≥ptimo depende del contexto y objetivos"
  ],
  correct: 2
},
{
  q: "¬øQu√© se entiende por liderazgo en una organizaci√≥n?",
  options: [
    "Capacidad de imponer √≥rdenes",
    "Capacidad de influir y guiar a las personas hacia objetivos comunes",
    "Capacidad t√©cnica exclusiva del directivo"
  ],
  correct: 1
},
{
  q: "¬øQu√© diferencia principal existe entre autoridad y liderazgo?",
  options: [
    "La autoridad es informal y el liderazgo formal",
    "La autoridad se basa en el cargo y el liderazgo en la influencia personal",
    "No existe ninguna diferencia"
  ],
  correct: 1
},
{
  q: "¬øQu√© estilo de liderazgo se caracteriza por la toma de decisiones centralizada?",
  options: [
    "Liderazgo democr√°tico",
    "Liderazgo autoritario",
    "Liderazgo laissez-faire"
  ],
  correct: 1
},
{
  q: "¬øQu√© estilo de liderazgo fomenta la participaci√≥n del grupo en la toma de decisiones?",
  options: [
    "Autoritario",
    "Democr√°tico",
    "Paternalista"
  ],
  correct: 1
},
{
  q: "¬øQu√© estilo de liderazgo se caracteriza por una m√≠nima intervenci√≥n del l√≠der?",
  options: [
    "Autoritario",
    "Democr√°tico",
    "Laissez-faire"
  ],
  correct: 2
},
{
  q: "¬øQu√© es la motivaci√≥n en el √°mbito organizativo?",
  options: [
    "Proceso que impulsa a las personas a actuar para alcanzar objetivos",
    "Sistema de sanciones",
    "Capacidad de control jer√°rquico"
  ],
  correct: 0
},
{
  q: "¬øQu√© autor propuso la teor√≠a de la jerarqu√≠a de necesidades?",
  options: [
    "Herzberg",
    "Maslow",
    "McGregor"
  ],
  correct: 1
},
{
  q: "Seg√∫n Maslow, ¬øqu√© necesidad ocupa el nivel m√°s b√°sico?",
  options: [
    "Necesidades sociales",
    "Necesidades fisiol√≥gicas",
    "Necesidades de autorrealizaci√≥n"
  ],
  correct: 1
},
{
  q: "¬øQu√© necesidades se sit√∫an en la c√∫spide de la pir√°mide de Maslow?",
  options: [
    "Necesidades de seguridad",
    "Necesidades sociales",
    "Necesidades de autorrealizaci√≥n"
  ],
  correct: 2
},
{
  q: "¬øQu√© teor√≠a distingue entre factores higi√©nicos y motivadores?",
  options: [
    "Teor√≠a X e Y",
    "Teor√≠a de Herzberg",
    "Teor√≠a de Maslow"
  ],
  correct: 1
},
{
  q: "Seg√∫n Herzberg, ¬øqu√© son los factores higi√©nicos?",
  options: [
    "Factores que motivan directamente",
    "Factores cuya ausencia genera insatisfacci√≥n",
    "Factores irrelevantes"
  ],
  correct: 1
},
{
  q: "Seg√∫n Herzberg, ¬øqu√© generan los factores motivadores?",
  options: [
    "Insatisfacci√≥n",
    "Neutralidad",
    "Satisfacci√≥n y motivaci√≥n"
  ],
  correct: 2
},
{
  q: "¬øQui√©n formul√≥ la Teor√≠a X y la Teor√≠a Y?",
  options: [
    "Maslow",
    "McGregor",
    "Taylor"
  ],
  correct: 1
},
{
  q: "La Teor√≠a X parte de la idea de que los trabajadores:",
  options: [
    "Buscan autorrealizaci√≥n",
    "Evitan el trabajo y necesitan control",
    "Son aut√≥nomos y responsables"
  ],
  correct: 1
},
{
  q: "La Teor√≠a Y considera que los trabajadores:",
  options: [
    "Evitan responsabilidades",
    "Necesitan supervisi√≥n constante",
    "Pueden autodirigirse y asumir responsabilidades"
  ],
  correct: 2
},
{
  q: "¬øQu√© relaci√≥n existe entre liderazgo y motivaci√≥n?",
  options: [
    "No existe relaci√≥n",
    "El liderazgo influye directamente en la motivaci√≥n",
    "La motivaci√≥n elimina la necesidad de liderazgo"
  ],
  correct: 1
},
{
  q: "¬øEn qu√© consiste la funci√≥n de control dentro de la direcci√≥n?",
  options: [
    "Definir objetivos estrat√©gicos",
    "Comparar resultados con los objetivos y corregir desviaciones",
    "Motivar a los trabajadores"
  ],
  correct: 1
},
{
  q: "¬øCu√°l es el objetivo principal del control?",
  options: [
    "Sancionar a los trabajadores",
    "Garantizar que la organizaci√≥n alcance sus objetivos",
    "Reducir la autonom√≠a"
  ],
  correct: 1
},
{
  q: "¬øQu√© fases componen el proceso de control?",
  options: [
    "Establecer est√°ndares, medir resultados, comparar y corregir",
    "Planificar, organizar y dirigir",
    "Evaluar, sancionar y motivar"
  ],
  correct: 0
},
{
  q: "¬øQu√© es la estrategia empresarial?",
  options: [
    "Conjunto de decisiones a corto plazo",
    "Conjunto de decisiones y acciones para alcanzar objetivos a largo plazo",
    "Plan operativo diario"
  ],
  correct: 1
},
{
  q: "¬øQu√© autor defini√≥ la estrategia como la determinaci√≥n de objetivos a largo plazo y la asignaci√≥n de recursos?",
  options: [
    "Porter",
    "Chandler",
    "Mintzberg"
  ],
  correct: 1
},
{
  q: "¬øQu√© es el an√°lisis DAFO?",
  options: [
    "An√°lisis financiero",
    "An√°lisis de Debilidades, Amenazas, Fortalezas y Oportunidades",
    "An√°lisis de productividad"
  ],
  correct: 1
},
{
  q: "¬øQu√© elementos analiza el DAFO interno?",
  options: [
    "Fortalezas y debilidades",
    "Amenazas y oportunidades",
    "Entorno pol√≠tico y econ√≥mico"
  ],
  correct: 0
},
{
  q: "¬øQu√© elementos analiza el DAFO externo?",
  options: [
    "Fortalezas y oportunidades",
    "Debilidades y amenazas",
    "Amenazas y oportunidades"
  ],
  correct: 2
},
{
  q: "¬øQu√© es el an√°lisis PESTEL?",
  options: [
    "An√°lisis interno de la empresa",
    "An√°lisis del entorno pol√≠tico, econ√≥mico, social, tecnol√≥gico, ecol√≥gico y legal",
    "An√°lisis de recursos humanos"
  ],
  correct: 1
},
{
  q: "¬øQu√© fuerza NO forma parte del modelo de Porter?",
  options: [
    "Poder de negociaci√≥n de proveedores",
    "Poder de negociaci√≥n de clientes",
    "Capacidad financiera interna"
  ],
  correct: 2
},
{
  q: "¬øCu√°les son las cinco fuerzas de Porter?",
  options: [
    "Competidores, proveedores, clientes, productos sustitutivos y nuevos entrantes",
    "Clientes, trabajadores, gobierno, proveedores y competidores",
    "Entorno pol√≠tico, econ√≥mico y social"
  ],
  correct: 0
},
{
  q: "¬øQu√© se entiende por toma de decisiones?",
  options: [
    "Elecci√≥n entre diferentes alternativas",
    "Aplicaci√≥n autom√°tica de normas",
    "Ejecuci√≥n de √≥rdenes"
  ],
  correct: 0
},
{
  q: "¬øQu√© caracteriza a una decisi√≥n programada?",
  options: [
    "Se toma ante situaciones nuevas y complejas",
    "Se basa en reglas y procedimientos establecidos",
    "Carece de informaci√≥n previa"
  ],
  correct: 1
},
{
  q: "¬øQu√© caracteriza a una decisi√≥n no programada?",
  options: [
    "Se toma rutinariamente",
    "Se basa en normas existentes",
    "Se toma ante problemas nuevos y no estructurados"
  ],
  correct: 2
},
{
  q: "¬øQu√© nivel directivo suele tomar decisiones estrat√©gicas?",
  options: [
    "Nivel operativo",
    "Direcci√≥n intermedia",
    "Alta direcci√≥n"
  ],
  correct: 2
},
{
  q: "¬øQu√© afirmaci√≥n es correcta respecto a la toma de decisiones?",
  options: [
    "Siempre se dispone de informaci√≥n completa",
    "Existe racionalidad limitada",
    "No influyen factores humanos"
  ],
  correct: 1
}



]

function shuffle(array){
  const a = array.slice();
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]] = [a[j],a[i]];
  }
  return a;
}

// Construir preguntas (barajando preguntas y, salvo lock:true, tambi√©n opciones)
function buildQuestionsFrom(rawArray){
  return shuffle(rawArray).map(q => {
    if (q.lock) {
      return {
        q: q.q,
        options: q.options.slice(),
        correct: q.correct,
        answer: null,
        lock: true
      };
    } else {
      const idxs = shuffle(q.options.map((_, i) => i));
      const newOptions = idxs.map(i => q.options[i]);
      const newCorrect = idxs.indexOf(q.correct);
      return {
        q: q.q,
        options: newOptions,
        correct: newCorrect,
        answer: null,
        lock: false
      };
    }
  });
}


// Estado inicial
let questions = buildQuestionsFrom(RAW);

let current = 0;
let correctCount = 0;
let wrongCount = 0;
let penaltyCount = 0;
let failStreak = 0;
let testFinished = false;

const qTextEl = document.getElementById("qText");
const qNumberEl = document.getElementById("qNumber");
const optionsBox = document.getElementById("optionsBox");
const statCorrectEl = document.getElementById("statCorrect");
const statWrongEl = document.getElementById("statWrong");
const statPenaltyEl = document.getElementById("statPenalty");
const statIndexEl = document.getElementById("statIndex");
const feedbackEl = document.getElementById("feedback");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");
const retryWrongBtn = document.getElementById("retryWrongBtn");
const shuffleBtn = document.getElementById("shuffleBtn");
const cardEl = document.getElementById("card");
const finalBox = document.getElementById("finalBox");

function allAnswered(){
  return questions.every(q => q.answer !== null);
}

function renderQuestion(){
  const q = questions[current];
  qNumberEl.textContent = "Pregunta " + (current+1);
  qTextEl.textContent = q.q;
  statIndexEl.textContent = (current+1) + " / " + questions.length;
  optionsBox.innerHTML = "";
  const keys = ["A","B","C","D"];

  q.options.forEach((opt,idx)=>{
    const btn = document.createElement("button");
    btn.className = "btn-option";
    btn.dataset.index = idx;
    btn.innerHTML = `<span class="key">${keys[idx]}</span><span class="label">${opt}</span>`;
    if(q.answer !== null){
      btn.classList.add("disabled");
      if(idx === q.correct) btn.classList.add("correct");
      if(idx === q.answer && q.answer !== q.correct) btn.classList.add("wrong");
    }
    btn.addEventListener("click", ()=> handleAnswer(idx));
    optionsBox.appendChild(btn);
  });

  prevBtn.disabled = current === 0;
  nextBtn.disabled = current === questions.length-1;
  feedbackEl.textContent = q.answer === null ?
    "Elige una opci√≥n. Cada 3 fallos se resta 1 acierto." :
    (q.answer === q.correct ? "Respuesta ya contestada: correcta." : "Respuesta ya contestada: incorrecta.");
  feedbackEl.className = "neutral";
}

function triggerExplosion(){
  const ex = document.createElement("div");
  ex.className = "explosion";

  const core = document.createElement("div");
  core.className = "explosion-core";
  const label = document.createElement("div");
  label.className = "explosion-label";
  label.textContent = "üí• ¬°BOOM!";
  core.appendChild(label);
  ex.appendChild(core);

  // trocitos que saltan alrededor
  const pieces = 16;
  for(let i=0;i<pieces;i++){
    const piece = document.createElement("div");
    piece.className = "explosion-piece";
    const angle = Math.random()*2*Math.PI;
    const dist = 80 + Math.random()*80;
    const dx = Math.cos(angle)*dist;
    const dy = Math.sin(angle)*dist;
    piece.style.setProperty("--dx", dx + "px");
    piece.style.setProperty("--dy", dy + "px");
    ex.appendChild(piece);
  }

  cardEl.appendChild(ex);
  setTimeout(()=> {
    if (ex.parentNode) ex.parentNode.removeChild(ex);
  }, 800);
}

function triggerConfetti(){
  const container = document.createElement("div");
  container.className = "confetti-container";
  const emojis = ["ü•≥","üéâ","üéä","üéà","üéâ","ü•≥","üéä"];
  const pieces = 48;
  for(let i=0;i<pieces;i++){
    const span = document.createElement("span");
    span.className = "confetti-emoji";
    span.textContent = emojis[Math.floor(Math.random()*emojis.length)];
    span.style.left = Math.random()*100 + "%";
    span.style.fontSize = (18 + Math.random()*10) + "px";
    span.style.animationDelay = (Math.random()*0.7) + "s";
    container.appendChild(span);
  }
  cardEl.appendChild(container);
  setTimeout(()=>{
    if (container.parentNode) container.parentNode.removeChild(container);
  }, 2600);
}

function maybeFinishTest(){
  if (!testFinished && allAnswered()){
    testFinished = true;
    showResult();
  }
}

function handleAnswer(idx){
  const q = questions[current];
  if(q.answer !== null) return;

  q.answer = idx;

  const btns = optionsBox.querySelectorAll(".btn-option");
  btns.forEach(b=>{
    b.classList.add("disabled");
    const i = parseInt(b.dataset.index,10);
    if(i === q.correct) b.classList.add("correct");
    if(i === idx && idx !== q.correct) b.classList.add("wrong");
  });

  if(idx === q.correct){
    correctCount++;
    failStreak = 0;
    statCorrectEl.textContent = correctCount;
    feedbackEl.textContent = "‚úÖ ¬°Correcto!";
    feedbackEl.className = "ok";
    pulseCard(true);
    triggerConfetti();
  }else{
    wrongCount++;
    failStreak++;
    statWrongEl.textContent = wrongCount;
    let msg = "‚ùå Incorrecto.";
    if(failStreak >= 3 && correctCount > 0){
      correctCount--;
      penaltyCount++;
      failStreak = 0;
      statCorrectEl.textContent = correctCount;
      statPenaltyEl.textContent = penaltyCount;
      msg += " Has acumulado 3 fallos: se resta 1 acierto.";
    }else{
      const remain = 3 - failStreak;
      msg += " Cuando acumules " + remain + " fallo(s) m√°s se restar√° 1 acierto.";
    }
    feedbackEl.textContent = msg;
    feedbackEl.className = "bad";
    pulseCard(false);
    triggerExplosion();
  }

  maybeFinishTest();
}

function pulseCard(ok){
  const cls = ok ? "flash-correct" : "flash-wrong shake";
  cardEl.classList.add(...cls.split(" "));
  setTimeout(()=> {
    cardEl.classList.remove("flash-correct","flash-wrong","shake");
  }, 500);
}

prevBtn.addEventListener("click", ()=>{
  if(current>0){
    current--;
    renderQuestion();
  }
});
nextBtn.addEventListener("click", ()=>{
  if(current<questions.length-1){
    current++;
    renderQuestion();
  }
});

// Resultado final (se muestra autom√°ticamente al completar todas las preguntas)
function showResult(){
  const total = questions.length;
  const answered = questions.filter(q=>q.answer!==null).length;
  const score = correctCount - penaltyCount;
  const pct = total>0 ? Math.round((score/total)*100) : 0;

  let txt = "";
  txt += "<strong>Resultado final:</strong><br>";
  txt += "Preguntas respondidas: " + answered + " de " + total + "<br>";
  txt += "Aciertos netos: " + correctCount + "<br>";
  txt += "Fallos: " + wrongCount + "<br>";
  txt += "Penalizaciones aplicadas (cada 3 fallos): " + penaltyCount + "<br>";
  txt += "Puntuaci√≥n (aciertos - penalizaciones): <strong>" + score + "</strong> (" + pct + "% aproximado).<br>";
  txt += "Recuerda contrastar siempre con temario, jurisprudencia y normativa oficial.";

  finalBox.innerHTML = txt;
}

// Reiniciar test solo con las preguntas falladas
function restartWithWrong(){
  if(!allAnswered()){
    finalBox.innerHTML = "<strong>Para repetir solo los errores, primero contesta todas las preguntas.</strong>";
    window.scrollTo({top:0,behavior:"smooth"});
    return;
  }

  const wrongQs = questions.filter(q => q.answer !== null && q.answer !== q.correct);

  if(wrongQs.length === 0){
    finalBox.innerHTML = "<strong>No tienes preguntas falladas para repetir.</strong>";
    window.scrollTo({top:0,behavior:"smooth"});
    return;
  }

  const base = wrongQs.map(q => ({
    q: q.q,
    options: q.options.slice(),
    correct: q.correct,
    lock: q.lock
  }));

  questions = buildQuestionsFrom(base);
  current = 0;
  correctCount = 0;
  wrongCount = 0;
  penaltyCount = 0;
  failStreak = 0;
  testFinished = false;
  statCorrectEl.textContent = "0";
  statWrongEl.textContent = "0";
  statPenaltyEl.textContent = "0";
  finalBox.innerHTML = "<strong>Nuevo test iniciado solo con las preguntas que fallaste.</strong>";
  renderQuestion();
  window.scrollTo({top:0,behavior:"smooth"});
}

function restartAll(){
  questions = buildQuestionsFrom(RAW);
  current = 0;
  correctCount = 0;
  wrongCount = 0;
  penaltyCount = 0;
  failStreak = 0;
  testFinished = false;
  statCorrectEl.textContent = "0";
  statWrongEl.textContent = "0";
  statPenaltyEl.textContent = "0";
  finalBox.innerHTML = "<strong>Nuevo test iniciado con todas las preguntas barajadas.</strong>";
  renderQuestion();
  window.scrollTo({top:0,behavior:"smooth"});
}

retryWrongBtn.addEventListener("click", restartWithWrong);
shuffleBtn.addEventListener("click", restartAll);

// Inicio
document.getElementById("startBtn").addEventListener("click", ()=>{
  document.getElementById("startOverlay").style.display = "none";
  renderQuestion();
});
</script>
</body>
</html>
